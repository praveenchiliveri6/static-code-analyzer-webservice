/*
 * The copyright of this file belongs to Koninklijke Philips N.V., 2019.
 */
package com.trg.boot.input;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.EmptyResultDataAccessException;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class UserInputDBDao {

  @Autowired
  JdbcTemplate jt;

  public UserinputDB verify(String name,int count) {
    final String sql="select * from security where projectname=?";
    try {
      return jt.queryForObject(sql,new Object[]{name},new DetailsMapper());
    }catch(final EmptyResultDataAccessException e) {
      return null;
    }

  }

  public void placeIntoDB(UserinputDB ui) {
    final String sql="insert into security values(?,?)";
    jt.update(sql,new Object[] {ui.getProjectname(),ui.getErrorcount()});
  }

  public void updateDB(String name,int count) {
    final String sql="update security set errorcount=? where projectname=?";
    jt.update(sql,new Object[] {count,name});
  }



}
